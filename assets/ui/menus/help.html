<!-- Help UI -->
<div class="help-overlay">
  <div class="help-container">
    <div class="help-header">
      <h2 class="help-title">Help</h2>
      <button class="help-close">Ã—</button>
    </div>
    
    <div class="help-content">
      <!-- Introduction Section -->
      <div class="help-intro-section">
        <p class="help-intro-text">Welcome to Lumberjack Simulator! Here's a quick help guide to get familiar with how to play.</p>
      </div>

      <!-- Controls Section -->
      <div class="help-controls-section">
        <h3 class="help-section-title">Game Controls</h3>
        <div class="help-controls-grid">
          <!-- Movement Controls -->
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">W</span>
              <span class="help-control-key">A</span>
              <span class="help-control-key">S</span>
              <span class="help-control-key">D</span>
            </div>
            <div class="help-control-description">Move</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">Shift</span>
            </div>
            <div class="help-control-description">Hold to run faster</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">Space</span>
            </div>
            <div class="help-control-description">Jump</div>
          </div>
          


          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">E</span>
            </div>
            <div class="help-control-description">Interact, pickup lumber, and chop down trees</div>
          </div>
          
          <!-- Combat Controls -->
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">Left Click</span>
            </div>
            <div class="help-control-description">Use item, attack or relock mouse</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">Right Click</span>
            </div>
            <div class="help-control-description">Use item secondary action</div>
          </div>
          
          <!-- UI Controls -->
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">I</span>
            </div>
            <div class="help-control-description">Open backpack</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">J</span>
            </div>
            <div class="help-control-description">Open quests</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">M</span>
            </div>
            <div class="help-control-description">Open character skills</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">1 ... 8</span>
            </div>
            <div class="help-control-description">Select hotbar items</div>
          </div>

          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">Esc</span>
            </div>
            <div class="help-control-description">Unlock mouse to click overlay buttons</div>
          </div>
          
          <div class="help-control-item">
            <div class="help-control-keys">
              <span class="help-control-key">T</span>
            </div>
            <div class="help-control-description">Open game chat to send messages</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Data Handlers
  hytopia.onData(data => {
    if (data.type === 'toggleHelp') {
      toggleHelp();
    }
  });

  // UI Functions
  function toggleHelp() {
    const overlay = document.querySelector('.help-overlay');
    if (overlay.style.display === 'flex') {
      closeHelp();
    } else {
      openHelp();
    }
  }

  function openHelp() {
    document.querySelector('.help-overlay').style.display = 'flex';
    hytopia.lockPointer(false, true);
  }

  function closeHelp() {
    document.querySelector('.help-overlay').style.display = 'none';
    hytopia.lockPointer(true);
  }

  // Event Listeners
  function setupEventListeners() {
    document.querySelector('.help-close').addEventListener('click', closeHelp);
  }

  // Initialize
  setupEventListeners();
  window.lumberjackSimulator = window.lumberjackSimulator || {};
  window.lumberjackSimulator.openHelp = openHelp;
</script>

<style>
  :root {
    --help-font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  }

  .help-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    font-family: var(--help-font);
    user-select: none;
  }

  /* Container Styles */
  .help-container {
    background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
    border: 2px solid #444;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.9), inset 0 1px 0 rgba(255, 255, 255, 0.1);
    width: 700px;
    max-height: 80vh;
    overflow: hidden;
  }

  /* Header Styles */
  .help-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #3a3a3a, #2d2d2d);
    border-bottom: 1px solid #444;
  }

  .help-title {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.9);
    letter-spacing: 0.3px;
  }

  .help-close {
    background: rgba(255, 0, 0, 0.2);
    border: 1px solid rgba(255, 0, 0, 0.3);
    border-radius: 6px;
    color: #ff6b6b;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .help-close:hover {
    background: rgba(255, 0, 0, 0.3);
    transform: scale(1.05);
  }

  /* Content Styles */
  .help-content {
    padding: 20px;
    overflow-y: auto;
    max-height: calc(80vh - 80px);
  }

  /* Introduction Section */
  .help-intro-section {
    margin-bottom: 16px;
    padding: 12px;
    background: rgba(76, 175, 80, 0.1);
    border: 1px solid rgba(76, 175, 80, 0.3);
    border-radius: 8px;
  }

  .help-intro-text {
    margin: 0;
    font-size: 14px;
    font-weight: 500;
    color: #e8f5e8;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.9);
    line-height: 1.5;
    text-align: center;
  }

  /* Controls Section */
  .help-controls-section {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid #444;
    border-radius: 8px;
    padding: 12px;
  }

  .help-section-title {
    margin: 0 0 12px 0;
    font-size: 14px;
    font-weight: 600;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.9);
  }

  .help-controls-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .help-control-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px;
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid #333;
    border-radius: 6px;
    transition: all 0.2s ease;
  }

  .help-control-item:hover {
    border-color: #555;
    background: rgba(0, 0, 0, 0.6);
  }

  .help-control-keys {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
  }

  .help-control-key {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 28px;
    height: 28px;
    background: linear-gradient(145deg, #3a3a3a, #2d2d2d);
    border: 1px solid #555;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 600;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.9);
    box-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.8),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    padding: 0 6px;
  }

  .help-control-description {
    font-size: 12px;
    font-weight: 500;
    color: #cccccc;
    line-height: 1.3;
    flex: 1;
  }

  /* Mobile Styles */
  body.mobile .help-container {
    width: auto;
    max-width: 98vw;
    min-width: 300px;
    max-height: 90vh;
  }

  body.mobile .help-header {
    padding: 8px 12px;
  }

  body.mobile .help-title {
    font-size: 14px;
  }

  body.mobile .help-close {
    width: 20px;
    height: 20px;
    font-size: 14px;
  }

  body.mobile .help-content {
    padding: 12px;
    max-height: calc(90vh - 60px);
  }

  body.mobile .help-intro-section {
    margin-bottom: 16px;
    padding: 12px;
  }

  body.mobile .help-intro-text {
    font-size: 12px;
  }

  body.mobile .help-controls-section {
    padding: 12px;
  }

  body.mobile .help-section-title {
    font-size: 12px;
    margin-bottom: 12px;
  }

  body.mobile .help-controls-grid {
    grid-template-columns: 1fr;
    gap: 6px;
  }

  body.mobile .help-control-item {
    gap: 12px;
    padding: 8px;
  }

  body.mobile .help-control-key {
    min-width: 24px;
    height: 24px;
    font-size: 10px;
    padding: 0 6px;
  }

  body.mobile .help-control-description {
    font-size: 11px;
  }

  /* Scrollbar Styles */
  .help-content::-webkit-scrollbar {
    width: 6px;
  }

  .help-content::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
  }

  .help-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
  }

  .help-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }
</style>
