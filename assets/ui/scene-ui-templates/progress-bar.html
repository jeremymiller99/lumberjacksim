<!-- Progress Bar Scene UI Template -->
<template id="progress-bar-template">
  <div class="progress-bar-container">
    <div class="progress-bar">
      <div class="progress-bar-fill" style="width: 0%;"></div>
      <div class="progress-bar-text">Chopping...</div>
    </div>
  </div>
</template>

<script>
  hytopia.registerSceneUITemplate('progress-bar', (id, onState) => {
    const template = document.getElementById('progress-bar-template');
    const clone = template.content.cloneNode(true);
    const container = clone.querySelector('.progress-bar-container');
    const progressFill = clone.querySelector('.progress-bar-fill');
    const progressText = clone.querySelector('.progress-bar-text');
    
    onState(state => {
      if (state.progress !== undefined) {
        const progressPercent = Math.max(0, Math.min(100, state.progress));
        progressFill.style.width = `${progressPercent}%`;
      }
      
      if (state.text) {
        progressText.textContent = state.text;
      }
      
      if (state.visible !== undefined) {
        container.style.display = state.visible ? 'block' : 'none';
      }
    });

    return clone;
  });
</script>

<style>
  .progress-bar-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    user-select: none;
    pointer-events: none;
    margin-bottom: 10px;
  }

  .progress-bar {
    position: relative;
    width: 120px;
    height: 16px;
    background: rgba(0, 0, 0, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.6),
      inset 0 1px 2px rgba(0, 0, 0, 0.5);
  }

  .progress-bar-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, #6b7280, #9ca3af);
    transition: width 0.1s linear;
    box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.2);
    border-radius: 7px;
  }

  .progress-bar-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 10px;
    font-weight: 600;
    color: #ffffff;
    text-shadow: 
      0 1px 2px rgba(0, 0, 0, 0.9),
      1px 1px 0 #000, 
      -1px -1px 0 #000;
    white-space: nowrap;
    z-index: 2;
  }
</style>
